/*
============================================
ðŸ›  Project Status: Lore Archive UI Troubleshooting

Refining Lore Archive layout logic for cross-browser consistency (Chrome, Firefox, Safari).
Focus: structural integrity, modular CSS, cross-browser compatibility.

Issues:
1. Button interaction bug (Safari/Firefox):
   - CTA button intermittently fails to register clicks.
   - Possible z-index, overlay, flex/grid, or event bubbling issues.
2. CSS fallback coverage:
   - Audit for missing @supports queries and fallback styles.
   - Grid-first, Flexbox fallback for picky engines.
3. Structural refactor in layout zones:
   - Modular, reusable grid areas and semantic containers.
4. Legacy style conflicts:
   - Cleanup unused/overly specific selectors.
============================================
*/
/* ðŸ§ª Experimental Lore Styling */
/*
============================================
ðŸ§© Lore Archive Layout Zone â€” Grid-first, Flexbox Fallback
============================================
*/
.lore-archive-layout {
  /* Grid-first approach for modern browsers */
  display: grid;
  grid-template-columns: 1fr 2fr;
  grid-template-rows: auto 1fr;
  grid-template-areas:
    "sidebar main"
    "sidebar main";
  gap: 2em;
  align-items: stretch;
  min-height: 60vh;
}

@supports not (display: grid) {
  .lore-archive-layout {
    /* Flexbox fallback for older browsers */
    display: flex;
    flex-direction: row;
    align-items: stretch;
  }
  .lore-archive-sidebar {
    flex: 1 1 30%;
    margin-right: 2em;
  }
  .lore-archive-main {
    flex: 2 1 70%;
  }
}

.lore-archive-sidebar {
  grid-area: sidebar;
}
.lore-archive-main {
  grid-area: main;
}

.lore-entry {
  margin-bottom: 1.5em;
  padding: 1em 1.2em;
  background: #232323;
  border-left: 4px solid #c8a344;
  border-radius: 6px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  transition: background 0.3s ease;
}

.lore-entry:hover {
  background: #181817;
}

.lore-entry h4 {
  margin: 0 0 0.2em;
  font-size: 1.25em;
  color: #5a3b00;
}

.lore-entry small {
  display: block;
  margin-bottom: 0.5em;
  color: #6d6d6d;
  font-size: 0.85em;
}

.lore-entry p {
  margin: 0.3em 0;
  line-height: 1.4;
  color: #f9f6ec;
}

.lore-entry em {
  font-style: italic;
  color: #946d00;
}

#loreEditor {
  margin-bottom: 2em;
  padding: 1em;
  background: #f9f6ec;
  border: 1px solid #d4c8a3;
  border-radius: 6px;
  position: relative; /* Ensure stacking context */
  z-index: 10; /* Bring above possible overlays */
  pointer-events: auto; /* Always allow interaction */
  overflow: visible; /* Prevent clipping of children */
}

#loreEditor h4 {
  margin-top: 0;
  font-size: 1.1em;
  color: #5a4600;
}

#loreEditor input,
#loreEditor textarea {
  display: block;
  width: 100%;
  margin: 0.5em 0;
  padding: 0.6em;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 1em;
}

#loreEditor button {
  background: #c8a344;
  color: white;
  padding: 0.5em 1em;
  border: none;
  border-radius: 4px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s ease;
  z-index: 11; /* Ensure button is above other elements */
  position: relative;
  pointer-events: auto;
}

#loreEditor button:hover {
  background: #a78430;
}

#lorePanel {
  margin-top: 1em;
  position: relative;
  z-index: 5;
}

/* --- NAVIGATION BUTTONS --- */
.tab-nav {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5em;
  justify-content: center;
  margin-bottom: 1.5em;
}

.nav-group {
  display: flex;
  gap: 0.5em;
}

.tab-nav button {
  background: #23272f;
  color: #f0e6d2;
  border: 2px solid transparent;
  border-radius: 6px;
  padding: 0.5em 1em;
  font-size: 0.95rem;
  font-family: inherit;
  font-weight: 600;
  line-height: 1.2;
  cursor: pointer;
  transition: background 0.2s, box-shadow 0.2s, color 0.2s, border-color 0.2s;
  box-shadow: 0 1px 4px rgba(0,0,0,0.08);
  outline: none;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 160px; /* Optional: makes all buttons same width */
}

.tab-nav button.selected,
.tab-nav button:focus {
  background: #d4af37;
  color: #23272f;
  border-color: #d4af37;
  box-shadow: 0 2px 8px rgba(212,175,55,0.15);
}

.tab-nav button:hover:not(.selected) {
  background: #353b47;
  color: #ffe082;
  border-color: #ffe082;
}

.tab-nav button:active {
  outline: none;
  box-shadow: 0 2px 8px rgba(212,175,55,0.15);
}

/* --- PANELS --- */
.codex-panel {
  background: #181a20;
  border-radius: 10px;
  box-shadow: 0 2px 16px rgba(0,0,0,0.12);
  padding: 2em 1.5em;
  margin: 1.5em auto;
  max-width: 1100px; /* or more, as needed */
  width: 98%;
  transition: box-shadow 0.2s;
}

.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.2em;
}

.edit-btn {
  background: #d4af37;
  color: #23272f;
  border: none;
  border-radius: 4px;
  padding: 0.4em 1em;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.edit-btn:hover,
.edit-btn:focus {
  background: #ffe082;
  color: #181a20;
}

/* --- RESPONSIVE DESIGN --- */
@media (max-width: 700px) {
  .codex-panel {
    padding: 1em 0.5em;
    max-width: 100vw;
  }
  .tab-nav {
    flex-direction: column;
    gap: 0.7em;
  }
  .nav-group {
    flex-direction: column;
    gap: 0.3em;
  }
  .panel-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5em;
  }
}
